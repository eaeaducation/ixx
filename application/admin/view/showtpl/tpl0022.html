<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>模板一</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <!--link page4's CSS -->
    <link rel="stylesheet" href="/static/temp/tpl0022/css/t2.css">
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="/static/temp/tpl0022/js/swiper/dist/css/swiper.min.css">
    <link rel="stylesheet" href="/static/temp/tpl0022/js/swiper/animate.min.css">
    <!--styles -->
    <style>
        html, body {
            position: relative;
            height: 100%;
        }

        body {
            background: #eee;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color: #000;
            margin: 0;
            padding: 0;
        }

        .swiper-container {
            width: 100%;
            height: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        .swiper-slide {
            font-size: 18px;
            background: #fff;
        }

        .swiper-slide img {
            width: 100%;
        }

        p {
            color: white;
            text-align: center;
        }

    </style>
    <!-- login JS-->
    <script src="/static/temp/tpl0022/js/jquery.min.js"></script>
    <script src="/static/temp/tpl0022/js/t1.js"></script>
    <!-- Swiper JS -->
    <script src="/static/temp/tpl0022/js/swiper/swiper.animate.min.js"></script>
    <script src="/static/temp/tpl0022/js/swiper/swiper-4.3.3.min.js"></script>

</head>
<body>
<!-- Swiper -->
<div class="swiper-container">
    <div class="swiper-wrapper">
        <!--第一页-->
        <div class="swiper-slide bg1" style="background-size: 100% 100%;position: relative;background-repeat:no-repeat;"
             id="pic1">
            <div>
                <img id="pic2" style="margin-top: 42%;margin-left: 25%;width: 50%;height: 25%" class="ani"
                     swiper-animate-effect="rollIn" swiper-animate-duration="0.5s"
                     swiper-animate-delay="0.8s">
                <p class="p1 ani" style="padding-top: 45%;height: 25%" swiper-animate-effect="bounceInLeft"
                   swiper-animate-duration="0.5s" swiper-animate-delay="0.8s" id="p1"></p>
                <p style="padding-top: 5%;padding-bottom: 19%" class="ani" swiper-animate-effect="bounceInRight"
                   swiper-animate-duration="0.5s"
                   swiper-animate-delay="0.8s" id="p2"></p>
                <img id="pic1_1" style="margin-bottom: 5%;height: 25%" class="ani"
                     swiper-animate-effect="bounceInUp" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
            </div>
        </div>
        <!--第二页-->
        <div class="swiper-slide bg2" style="background-size: 100% 100%" id="pic3">
            <div>
                <h2 style="text-align: center;color: white;margin-top: 33%;position: absolute;margin-left: 37%" id="title" swiper-animate-effect="wobble" swiper-animate-duration="0.8s"
                    swiper-animate-delay="0.3s" class="ani"></h2>
                <div style="margin-top: 51%;width: 70%;margin-left: 15%;color: white;position: fixed" class="ani"
                     swiper-animate-effect="fadeInDown" swiper-animate-duration="0.8s"
                     swiper-animate-delay="0.3s">
                    <span id="p3"></span>
                </div>
            </div>
            <div>
                <img id="pic4" style="margin-top: 131%;position: fixed" class="ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.8s" swiper-animate-delay="0.3s">
            </div>
        </div>
        <!--第三页-->
        <div class="swiper-slide bg3" style="background-size: 100% 100%" id="pic3_1">
            <div>
                <img id="pic5" class="ani" swiper-animate-effect="zoomIn" swiper-animate-duration="0.8s"
                     swiper-animate-delay="0.3s"  style="width: 100%;height: 100%;margin-top: 10%;display: none" >
                <div id="bg22" style="margin-top:10%;background-size: 100% 100%;">
                    <p style="line-height: 165px" id="p3_2" class="ani" swiper-animate-effect="zoomIn" swiper-animate-duration="0.8s" swiper-animate-delay="0.3s"></p>
                </div>
                <img id="pic6" style="width: 20%;height: 100%;margin-top: 5%" class="ani" swiper-animate-effect="bounceInLeft"
                     swiper-animate-duration="0.8s" swiper-animate-delay="0.5s">
                <p style="width: 50%;text-align: center;margin-left: 25%" class="ani" swiper-animate-effect="zoomIn"
                   swiper-animate-duration="0.8s" swiper-animate-delay="0.3s" id="p4">
                </p>
                <img id="pic7" style="width: 20%;margin-left: 78%;margin-top: -41%" class="ani"
                     swiper-animate-effect="bounceInRight"
                     swiper-animate-duration="0.8s" swiper-animate-delay="0.5s">
                <img id="pic8" style="margin-top: 20%" class="ani" swiper-animate-effect="bounceInUp"
                     swiper-animate-duration="0.8s" swiper-animate-delay="0.5s">
            </div>
        </div>
        <!--第四页-->
        <div class="swiper-slide bg4" id="pic9">
            <img class="banner ani"  swiper-animate-effect="lightSpeedIn" swiper-animate-duration="0.8s"
                 swiper-animate-delay="0.3s"  id="pic10">
            <div class="form-item ani" style="margin: 15px auto" swiper-animate-effect="lightSpeedIn"
                 swiper-animate-duration="0.8s" swiper-animate-delay="0.3s">
                <img style="width: 90%;margin: 0 auto;" >
            </div>
                <div id="isshow2">
                    <p id="phone2" class="ani"
                       swiper-animate-effect="bounceInLeft"
                       swiper-animate-duration="0.8s" swiper-animate-delay="0.3s"></p>
                    <p style="margin-bottom: 10%" id="ad" class="ani"
                       swiper-animate-effect="bounceInRight"
                       swiper-animate-duration="0.8s" swiper-animate-delay="0.3s"></p>
                    <div style="text-align: center">
                        <img id="ewm" class="ani" swiper-animate-effect="fadeInUp" swiper-animate-duration="0.8s" swiper-animate-delay="0.3s" style="width: 50%;height: 100%;" >
                    </div>
                </div>
            </div>
        {if isset($myid)}
          <input name="act_id" value="{$myid}"  type="hidden" />
        {/if}
    </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination"></div>
</div>
<!-- Initialize Swiper -->
<div id="form" hidden>
<div class="form" style="height: 100%;" >
    <img class="banner ani"  swiper-animate-effect="lightSpeedIn" swiper-animate-duration="0.8s"
         swiper-animate-delay="0.3s"  id="pic">
    <div class="form-item ani" style="margin: 10px auto" swiper-animate-effect="lightSpeedIn"
         swiper-animate-duration="0.8s" swiper-animate-delay="0.3s">
        <img style="width: 90%;margin: 0 auto;" >
    </div>
    <!--数据收集开始-->
    <div id="isshow">

        <div class="form-item ani" swiper-animate-effect="lightSpeedIn" swiper-animate-duration="0.8s"
             swiper-animate-delay="0.3s">
            <input type="text" placeholder="请输入姓名" name="name"
                   style="border: 1px solid #00b7ee;background-color: white">
        </div>
        <div class="form-item ani" swiper-animate-effect="lightSpeedIn" swiper-animate-duration="0.8s"
             swiper-animate-delay="0.3s" id="phone">
            <input type="text" placeholder="请输入手机号码" name="mobile" style="border: 1px solid #00b7ee;background-color: white">
        </div>
        <div class="form-item">
            {if isset($actid) && isset($cid)}
            <button type="button" class="disabled button ani" swiper-animate-effect="rotateIn"
                    swiper-animate-duration="0.8s" swiper-animate-delay="0.3s"
                    style="color: white;border: 1px solid #00b7ee;  margin-bottom: 5px;background-color:#228a82" id="subname" onclick="receive('{$actid}','{$userid}','{$cid}');">
            </button>
            {else}
            <button type="button" class="disabled button ani" swiper-animate-effect="rotateIn"
                    swiper-animate-duration="0.8s" swiper-animate-delay="0.3s"
                    style="color: white;border: 1px solid #00b7ee;  margin-bottom: 5px;background-color:#228a82" id="subname" >
            </button>
            {/if}
        </div>
    </div>
    <!--数据收集结束-->
</div>
</div>
</body>
<script src="//captcha.luosimao.com/static/js/api.js"></script>
<!--<script src="/static/temp/tpl00020/js/layui/layui.js"></script>-->
<script src="/static/layui/layui.all.js"></script>
<script>

    function receive(actid,userid,cid) {
        var mobile = $('[name="mobile"]').val();
        var name = $('[name="name"]').val();
        if (!/^1[34578]\d{9}$/.test(mobile)) {
            layer.alert('请输入正确的手机号');
            return false;
        }
        $.post('/api/v1/Shows/collect', {mobile: mobile, actid: actid,userid:userid,name:name,cid:cid}, function (res) {
            if (res.success) {
                var return_url = '{:url("showtpl/activeBack")}?actid='+actid+'&uid='+res.data.id+'&userid='+res.data.userid;
                layer.msg(res.msg, {icon: 6})
                    layer.alert(res.msg, {
                        icon: 6,
                        skin: 'layui-layer-lan' //样式类名
                        , closeBtn: 0
                    }, function (index) {
                        layer.close(index);
                        window.location.href = return_url;
                    });
                } else {
                layer.msg(res.msg, {icon: 5})
            }
        })
    };
    //从数据源获取数据
    {if isset($myid)}
    var page = window.parent.getnum();
    $("[aria-label='Go to slide " + page + "']").click();
    var url = "{:url('showtpl/get_json_res')}?myid={$myid}";
    {elseif isset($actid) }
    var url = "{:url('showtpl/get_json_release')}?actid={$actid}";
    {else /}
    var url = "{:url('showtpl/get_json_res_tplmgmt')}?tplid={$tplid}";
    {/if}
            $.getJSON(url, function (data) {
                //第一页
                var element1 = document.getElementById('pic1');
                element1.style.backgroundImage = 'url(' + data.data[0]['background'].value + ')';
                var element2 = document.getElementById('pic2');
                element2.src = data.data[0]['looat-pic2'].value;
                document.getElementById('p1').innerHTML = data.data[0]['p1'].value;
                document.getElementById('p2').innerHTML =  data.data[0]['p2'].value;
                var element2 = document.getElementById('pic1_1');
                element2.src = data.data[0]['looat-pic'].value;
                //第二页
                var element3 = document.getElementById('pic3');
                element3.style.backgroundImage ='url(' + data.data[1]['background'].value + ')';
                document.getElementById('title').innerHTML = data.data[1]['p22'].value;
                document.getElementById('p3').innerHTML = data.data[1]['p3'].value;
                var element2 = document.getElementById('pic4');
                element2.src = data.data[1]['looat-pic4'].value;
                //第三页
                var element3 = document.getElementById('pic3_1');
                element3.style.backgroundImage ='url(' + data.data[2]['background'].value + ')';
                var element2 = document.getElementById('bg22');
                element2.style.backgroundImage = 'url(' + data.data[2]['background2'].value +')';
                var element2 = document.getElementById('pic5');
                element2.src = data.data[2]['looat-pic5'].value;
                var element2 = document.getElementById('pic6');
                element2.src = data.data[2]['looat-pic6'].value;
                document.getElementById('p4').innerHTML = data.data[2]['p4'].value;
                document.getElementById('p3_2').innerHTML = data.data[2]['p3_2'].value;
                var element2 = document.getElementById('pic7');
                element2.src = data.data[2]['looat-pic7'].value;
                var element2 = document.getElementById('pic8');
                element2.src = data.data[2]['looat-pic8'].value;
                //第四页
                var element6 = document.getElementById('pic9');
                element6.style.backgroundImage ='url(' + data.data[3]['background'].value + ')';
                var element7 = document.getElementById('pic10');
                element7.src = data.data[3]['looat-pic10'].value;
                //var isShow = document.getElementById('isShow');
                if (data.data[3]['isShow'].value != "1") {
                    $("#isshow").hide();
                    $("#isshow2").show();
                };
                var element7 = document.getElementById('ewm');
                element7.src = data.data[3]['ewm'].value;
                document.getElementById('phone2').innerHTML = data.data[3]['p4_1'].value;
                document.getElementById('ad').innerHTML = data.data[3]['p4_2'].value;
                if(data.public.isShow.value==1){
                    $('#subbtn').text(data.public.subname.value);
                    var page=".bg"+ data.public.formpage.value;
                    var formhtml=$("#form").html();
                    $(page).html(formhtml);
                    $(page).css('background-image', "url(" +  data.public.background.value + ")")
                    $(page).css('background_size',"100% 100%")
                    var element2 = document.getElementById('pic');
                    element2.src = data.public['looat-pic'].value;
                    document.getElementById('subname').innerHTML = data.public['subname'].value;
                }
            })

            $(function(){
                {if isset($myid)}
                var page = window.parent.getnum();
                $("[aria-label='Go to slide " + page + "']").click();
                var url = "{:url('showtpl/get_json_res')}?myid={$myid}";
                {elseif isset($actid) }
                var url = "{:url('showtpl/get_json_release')}?actid={$actid}";
                {else /}
                    var url = "{:url('showtpl/get_json_res_tplmgmt')}?tplid={$tplid}";
                    {/if}
                    });

            var swiper = new Swiper('.swiper-container', {
                direction: 'vertical',
                slidesPerView: 1,
                spaceBetween: 30,
                mousewheel: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                on: {
                    init: function () {
                        swiperAnimateCache(this); //隐藏动画元素
                        swiperAnimate(this); //初始化完成开始动画
                    },
                    slideChangeTransitionEnd: function () {
                        swiperAnimate(this); //每个slide切换结束时也运行当前slide动画
                    }
                }
            });
</script>
</html>