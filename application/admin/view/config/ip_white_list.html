<!--
 * User: Jasmine2
 * Date: 2017-6-28 17:56
 * Email: youjingqiang@gmail.com
 * Copyright (c) Guangzhou Zhishen Data Service co,. Ltd
-->
{extend name="admin@public/content"}

{block name="content"}
<form onsubmit="return false;" action="{:request()->url()}" data-auto="true" method="post"
      class='form-horizontal layui-form padding-top-20'>
    <div class="row">
        <div class="form-group">
            <label class="col-sm-2 control-label">白名单列表</label>
            <div class='col-sm-8'>
                <textarea name="ipwhitelist" class="layui-textarea"
                          pattern="^(?:(%)|(((0.0.0.0\/0)|(((?:25[0-5]|2[0-4]\d|1\d\d|\d{2}|\d)\.){3}((?:25[0-5]|2[0-4]\d|1\d\d|\d{2}|\d))(\/(?:[1-9]|1[0-9]|2[0-9]|3[0-2]))?))\,){0,999}(0.0.0.0\/0|((?:25[0-5]|2[0-4]\d|1\d\d|\d{2}|\d)\.){3}((?:25[0-5]|2[0-4]\d|1\d\d|\d{2}|\d))(\/(?:[1-9]|1[0-9]|2[0-9]|3[0-2]))?)|((0.0.0.0\/0)|(((?:25[0-5]|2[0-4]\d|1\d\d|\d{2}|\d)\.){3}((?:25[0-5]|2[0-4]\d|1\d\d|\d{2}|\d))(\/(?:[1-9]|1[0-9]|2[0-9]|3[0-2]))?)))$"
                          title="格式不正确">{:sysconf('ipwhitelist')}</textarea>
                <div class="help-block">
                    <ol class="text-danger">
                        <li>禁止访问: 127.0.0.1 禁止访问后您也将无法再次登录</li>
                        <li>不限制IP: 0.0.0.0/0</li>
                        <li>多个IP请使用半角逗号(,)分割, 如: 123.123.123.123,111.111.111.111</li>
                    </ol>
                    <p class="text-info">您的当前ip: <span class="label label-success">{$Request.ip}</span></p>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">例外会员组</label>
            <div class='col-sm-8'>
                <input type="text" class="layui-input" name="except_group" value="{:sysconf('except_group')}">
                <div class="help-block">
                    多个会员组请使用半角逗号(,)分割, 如: 9,10
                </div>
            </div>
        </div>
    </div>


    <div class="col-sm-4 col-sm-offset-3">
        <div class="layui-form-item text-center">
            <button class="layui-btn" type="submit">保存配置</button>
        </div>
    </div>
</form>
{/block}