<?php/** * User: Jasmine2 * Date: 2018/6/20 14:58 * Email: youjingqiang@gmail.com * Copyright (c) Guangzhou Zhishen Data Service co,. Ltd */namespace app\admin\controller;use controller\BasicAdmin;use think\facade\Cache;use think\Db;use service\DataService;/** * Class Branch * @package app\admin\controller * @author Jasmine2 * 校区管理 */class Branch extends BasicAdmin{    public $table = 'saas_school_branch';    /**     * @return array|string     * @throws \think\Exception     * @throws \think\db\exception\DataNotFoundException     * @throws \think\db\exception\ModelNotFoundException     * @throws \think\exception\DbException     * @author Jasmine2     */    public function index()    {        $this->title = '校区管理';        $db = Db::name($this->table)            ->order('id desc');        return parent::_list($db, true);    }    /**     * @return array|string     * @throws \think\db\exception\DataNotFoundException     * @throws \think\db\exception\ModelNotFoundException     * @throws \think\exception\DbException     * @throws \think\Exception     */    public function add()    {        if (Cache::has('branches')) {            Cache::rm('branches');        }        return $this->_form($this->table, 'form');    }    /**     * @return array|string     * @throws \think\db\exception\DataNotFoundException     * @throws \think\db\exception\ModelNotFoundException     * @throws \think\exception\DbException     * @throws \think\Exception     */    public function edit()    {        if (Cache::has('branches')) {            Cache::rm('branches');        }        return $this->_form($this->table, 'form');    }    /**     * @throws \think\Exception     * @throws \think\exception\PDOException     */    public function del()    {        if (DataService::update($this->table)) {            $this->success("校区删除成功!", '');        }        $this->error("校区删除失败, 请稍候再试!");    }}